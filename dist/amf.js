!function e(t,r,i){function n(a,o){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!o&&u)return u(a,!0);if(s)return s(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return n(r?r:e)},c,c.exports,e,t,r,i)}return r[a].exports}for(var s="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(e){var t=e("./lib/amf/amf.js"),r=e("./lib/amf/spec.js"),i=e("./lib/type/bytearray.js");window.AMF=t,window.Spec=r,window.ByteArray=i},{"./lib/amf/amf.js":2,"./lib/amf/spec.js":6,"./lib/type/bytearray.js":14}],2:[function(e,t){function r(e,t,r,i){i="undefined"==typeof i?f:i;var n=new p,s=new h(n,i);return s.serialize(e,t,r)}function i(e,t){var r=new l(e),i=new y(r);return i.deserialize(t)}function n(e){return i(e)}function s(e,t){return r(e,!0,void 0,t)}function a(e,t){d[e]=t}function o(e){return e in d?d[e]:null}var u=1,f=0,c="_classMapping";t.exports={serialize:r,deserialize:i,parse:n,stringify:s,registerClassAlias:a,getClassByAlias:o,CLASS_MAPPING:u,DEFAULT_OPTIONS:f,CLASS_MAPPING_FIELD:c};var p=e("../io/output.js"),l=e("../io/input.js"),h=e("../amf/serializer.js"),y=e("../amf/deserializer.js"),d={}},{"../amf/deserializer.js":4,"../amf/serializer.js":5,"../io/input.js":11,"../io/output.js":12}],3:[function(e,t){var r=e("./spec.js"),i=e("../type/bytearray.js"),n=e("../util/reference-store.js"),s=e("../exception/not-supported.js"),a=function(e){this.stream=e,this.referenceStore=new n};a.prototype={getDataType:function(e){switch(!0){case"undefined"==typeof e:return r.AMF3_UNDEFINED;case null===e:return r.AMF3_NULL;case e===!0||e===!1:return e?r.AMF3_TRUE:r.AMF3_FALSE;case"number"==typeof e&&e%1===0:return e<r.MIN_INT||e>r.MAX_INT?r.AMF3_DOUBLE:r.AMF3_INT;case"number"==typeof e&&e%1!==0:return r.AMF3_DOUBLE;case"string"==typeof e:return r.AMF3_STRING;case e instanceof Date:return r.AMF3_DATE;case e instanceof i:return r.AMF3_BYTE_ARRAY;case e instanceof Array:return r.AMF3_ARRAY;case"object"==typeof e:return r.AMF3_OBJECT;case"function"==typeof e:throw new s("Cannot serialize a function");default:return null}}},t.exports=a},{"../exception/not-supported.js":9,"../type/bytearray.js":14,"../util/reference-store.js":18,"./spec.js":6}],4:[function(e,t){var r=e("./amf.js"),i=e("./base.js"),n=e("./spec.js"),s=e("../util/reference-store.js"),a=e("../type/bytearray.js"),o=e("utf8"),u=e("../exception/deserialization.js"),f=function(e){i.call(this,e)};f.prototype=new i,f.prototype.constructor=f,f.prototype.deserialize=function(e){var t=this.stream.readByte(e);switch(parseInt(t)){case n.AMF3_UNDEFINED:return void 0;case n.AMF3_NULL:return null;case n.AMF3_FALSE:return!1;case n.AMF3_TRUE:return!0;case n.AMF3_INT:return this.deserializeInt();case n.AMF3_DOUBLE:return this.deserializeDouble();case n.AMF3_STRING:return this.deserializeString();case n.AMF3_DATE:return this.deserializeDate();case n.AMF3_ARRAY:return this.deserializeArray();case n.AMF3_OBJECT:return this.deserializeObject();case n.AMF3_BYTE_ARRAY:return this.deserializeByteArray();default:throw new u("Cannot deserialize type: "+t)}},f.prototype.deserializeInt=function(){for(var e=0,t=0,r=this.stream.readByte();0!==(128&r)&&3>t;)e<<=7,e|=127&r,r=this.stream.readByte(),t++;return 3>t?(e<<=7,e|=r):(e<<=8,e|=r,0!==(268435456&e)&&(e|=3758096384)),e},f.prototype.deserializeDouble=function(){return this.stream.readDouble()},f.prototype.deserializeString=function(){var e=this.deserializeInt();if(0===(e&n.REFERENCE_BIT))return e>>=n.REFERENCE_BIT,this.referenceStore.getByReference(e,s.TYPE_STRING);var t=e>>n.REFERENCE_BIT,r=o.decode(this.stream.readRawBytes(t));return this.referenceStore.addReference(r,s.TYPE_STRING),r},f.prototype.deserializeDate=function(){var e=this.deserializeInt();if(0===(e&n.REFERENCE_BIT))return e>>=n.REFERENCE_BIT,this.referenceStore.getByReference(e,s.TYPE_OBJECT);var t=this.stream.readDouble(),r=new Date(t);return this.referenceStore.addReference(r,s.TYPE_OBJECT),r},f.prototype.deserializeArray=function(){var e=this.deserializeInt();if(0===(e&n.REFERENCE_BIT))return e>>=n.REFERENCE_BIT,this.referenceStore.getByReference(e,s.TYPE_OBJECT);var t=e>>n.REFERENCE_BIT,r=[];this.referenceStore.addReference(r,s.TYPE_OBJECT);for(var i=this.deserializeString();i.length>0;)r[i]=this.deserialize(),i=this.deserializeString();for(var a=0;t>a;a++)r.push(this.deserialize());return r},f.prototype.deserializeObject=function(){var e=this.deserializeInt();if(0===(e&n.REFERENCE_BIT))return e>>=n.REFERENCE_BIT,this.referenceStore.getByReference(e,s.TYPE_OBJECT);var t=this.deserializeString(),i={};this.referenceStore.addReference(i,s.TYPE_OBJECT);for(var a={},o=this.deserializeString();o.length;)a[o]=this.deserialize(),o=this.deserializeString();if(t&&t.length>0){var f=r.getClassByAlias(t);if(!f)throw new u("Class "+t+" cannot be found. Consider registering a class alias.");i=new f,"importData"in i&&"function"==typeof i.importData?i.importData(a):c(i,a)}else c(i,a);return i};var c=function(e,t){try{for(var r in t){var i=t[r];e[r]=i}}catch(n){throw new u("Property '"+r+"' cannot be set on instance '"+typeof e+"'")}};f.prototype.deserializeByteArray=function(){var e=this.deserializeInt();if(0===(e&n.REFERENCE_BIT))return e>>=n.REFERENCE_BIT,this.referenceStore.getByReference(e,s.TYPE_OBJECT);var t=e>>n.REFERENCE_BIT,r=this.stream.readRawBytes(t);return new a(r)},t.exports=f},{"../exception/deserialization.js":8,"../type/bytearray.js":14,"../util/reference-store.js":18,"./amf.js":2,"./base.js":3,"./spec.js":6,utf8:19}],5:[function(e,t){var r=e("./base.js"),i=e("./spec.js"),n=e("../util/reference-store.js"),s=e("../util/object.js"),a=(e("../type/bytearray.js"),e("utf8")),o=e("../exception/serialization.js"),u=function(e,t){this.options=t,r.call(this,e)};u.prototype=new r,u.prototype.constructor=u,u.prototype.serialize=function(e,t,r){"undefined"==typeof t&&(t=!0);var n=r?r:this.getDataType(e);switch(t&&this.stream.writeByte(n),n){case i.AMF3_UNDEFINED:case i.AMF3_NULL:case i.AMF3_FALSE:case i.AMF3_TRUE:break;case i.AMF3_INT:this.serializeInt(e);break;case i.AMF3_DOUBLE:this.serializeDouble(e);break;case i.AMF3_STRING:this.serializeString(e);break;case i.AMF3_DATE:this.serializeDate(e);break;case i.AMF3_ARRAY:this.serializeArray(e);break;case i.AMF3_OBJECT:this.serializeObject(e);break;case i.AMF3_BYTE_ARRAY:this.serializeByteArray(e);break;default:throw new o("Unrecognized AMF type ["+n+"]")}return this.stream.getRaw()},u.prototype.serializeInt=function(e){if(e<i.MIN_INT||e>i.MAX_INT)throw new o("Integer out of range: "+e);e&=536870911,e<i.MIN_2_BYTE_INT?this.stream.writeByte(e):e<i.MIN_3_BYTE_INT?(this.stream.writeByte(e>>7&127|128),this.stream.writeByte(127&e)):e<i.MIN_4_BYTE_INT?(this.stream.writeByte(e>>14&127|128),this.stream.writeByte(e>>7&127|128),this.stream.writeByte(127&e)):(this.stream.writeByte(e>>22&127|128),this.stream.writeByte(e>>15&127|128),this.stream.writeByte(e>>8&127|128),this.stream.writeByte(255&e))},u.prototype.serializeDouble=function(e){this.stream.writeDouble(e)},u.prototype.serializeString=function(e,t){if(t="undefined"==typeof t?!0:t){var r=this.referenceStore.getReference(e,n.TYPE_STRING);if(r!==!1)return void this.serializeInt(r<<1)}var i=a.encode(e);this.serializeInt(i.length<<1|1),this.stream.writeRaw(i)},u.prototype.serializeDate=function(e){var t=this.referenceStore.getReference(e,n.TYPE_OBJECT);return t!==!1?void this.serializeInt(t<<1):void this.serialize(e.getTime(),!0,i.AMF3_DOUBLE)},u.prototype.serializeArray=function(e){var t=this.referenceStore.getReference(e,n.TYPE_OBJECT);if(t!==!1)return void this.serializeInt(t<<1);var r=null,s=i.isDenseArray(e);if(s){this.serializeInt(e.length<<1|i.REFERENCE_BIT),this.serializeString("");for(var a in e)r=e[a],this.serialize(r)}else{this.serializeInt(1);for(var o in e)r=e[o],this.serializeString(o,!1),this.serialize(r);this.serializeString("")}},u.prototype.serializeObject=function(e){var t=this.referenceStore.getReference(e,n.TYPE_OBJECT);if(t!==!1)return void this.serializeInt(t<<1);var r=e;s.isSerializable(e)&&(e=e.exportData());var i=s.getObjectKeys(e);if(this.serializeInt(11),this.serializeString(s.getClassName(r,this.options),!1),i.length>0)for(var a in i){var o=i[a],u=e[o];this.serializeString(o,!1),this.serialize(u)}this.serializeString("")},u.prototype.serializeByteArray=function(e){if(!("getData"in e))throw new o("Invalid ByteArray data provided");var t=this.referenceStore.getReference(e,n.TYPE_OBJECT);return t!==!1?void this.serializeInt(t<<1):(this.serializeInt(e.getData().length<<1|i.REFERENCE_BIT),void this.stream.writeRaw(e.getData()))},t.exports=u},{"../exception/serialization.js":10,"../type/bytearray.js":14,"../util/object.js":17,"../util/reference-store.js":18,"./base.js":3,"./spec.js":6,utf8:19}],6:[function(e,t){t.exports={AMF3_UNDEFINED:0,AMF3_NULL:1,AMF3_FALSE:2,AMF3_TRUE:3,AMF3_INT:4,AMF3_DOUBLE:5,AMF3_STRING:6,AMF3_XML_DOC:7,AMF3_DATE:8,AMF3_ARRAY:9,AMF3_OBJECT:10,AMF3_XML:11,AMF3_BYTE_ARRAY:12,AMF3_VECTOR_INT:13,AMF3_VECTOR_UINT:14,AMF3_VECTOR_DOUBLE:15,AMF3_VECTOR_OBJECT:16,AMF3_DICTIONARY:17,OBJECT_DYNAMIC:0,REFERENCE_BIT:1,MIN_2_BYTE_INT:128,MIN_3_BYTE_INT:16384,MIN_4_BYTE_INT:2097152,MAX_INT:268435455,MIN_INT:-268435456,isLittleEndian:function(){return!0},isDenseArray:function(e){if(!e)return!0;var t=0;for(var r in e){if(r!=t)return!1;t++}return!0}}},{}],7:[function(e,t){var r=function(e,t){this.message=e,this.name=t};r.prototype=new Error,r.prototype.constructor=r,t.exports=r},{}],8:[function(e,t){var r=e("./base.js"),i=function(e){r.call(this,e,"DeserializationException")};i.prototype=new r,i.prototype.constructor=i,t.exports=i},{"./base.js":7}],9:[function(e,t){var r=e("./base.js"),i=function(e){r.call(this,e,"NotSupportedException")};i.prototype=new r,i.prototype.constructor=i,t.exports=i},{"./base.js":7}],10:[function(e,t){var r=e("./base.js"),i=function(e){r.call(this,e,"SerializationException")};i.prototype=new r,i.prototype.constructor=i,t.exports=i},{"./base.js":7}],11:[function(e,t){var r=e("./stream.js"),i=(e("../amf/spec.js"),e("../util/ieee754.js")),n=function(e){this.pointer=0,r.call(this,e)};n.prototype=new r,n.prototype.constructor=n,n.prototype.readByte=function(){return this.readBytes(1)},n.prototype.readRawByte=function(){return this.readBytes(1,!0)},n.prototype.readRawBytes=function(e){return"undefined"==typeof e&&(e=1),this.readBytes(e,!0)},n.prototype.readBytes=function(e,t){if("undefined"==typeof e&&(e=1),"undefined"==typeof t&&(t=!1),value=this.getRaw().substr(this.pointer,e),0==value.length)return-1;if(this.pointer+=value.length,t)return value;for(var r="",i=0;i<value.length;i++)r+=value.charCodeAt(i);return r},n.prototype.readDouble=function(){var e=this.readRawBytes(8);return i.unpack(s(e))};var s=function(e){var t=[],r=e.split("");for(var i in r)t.push(r[i].toString().charCodeAt(0));return t};t.exports=n},{"../amf/spec.js":6,"../util/ieee754.js":15,"./stream.js":13}],12:[function(e,t){var r=e("./stream.js"),i=(e("../amf/spec.js"),e("../util/ieee754.js")),n=function(e){r.call(this,e)};n.prototype=new r,n.prototype.constructor=n,n.prototype.writeByte=function(e){this.raw+=String.fromCharCode(e)},n.prototype.writeDouble=function(e){this.raw+=s(i.pack(e,11,52))},n.prototype.writeRaw=function(e){this.raw+=e};var s=function(e){var t="";for(var r in e){var i=e[r];t+=String.fromCharCode(parseInt(i))}return t};t.exports=n},{"../amf/spec.js":6,"../util/ieee754.js":15,"./stream.js":13}],13:[function(e,t){var r=function(e){e&&"undefined"!=typeof e||(e=""),this.raw=e.toString()};r.prototype={getRaw:function(){return this.raw},toString:function(){return this.getRaw()}},t.exports=r},{}],14:[function(e,t){var r=function(e){this.data=e};r.prototype={getData:function(){return this.data},setData:function(e){this.data=e},toString:function(){return this.getData()}},t.exports=r},{}],15:[function(e,t){function r(e){var t,r,i,n,s,a,o,u,f=11,c=52,p=(1<<f-1)-1;for(isNaN(e)?(r=(1<<p)-1,i=Math.pow(2,c-1),t=0):1/0===e||e===-1/0?(r=(1<<p)-1,i=0,t=0>e?1:0):0===e?(r=0,i=0,t=1/e===-1/0?1:0):(t=0>e,e=Math.abs(e),e>=Math.pow(2,1-p)?(n=Math.min(Math.floor(Math.log(e)/Math.LN2),p),r=n+p,i=Math.round(e*Math.pow(2,c-n)-Math.pow(2,c))):(r=0,i=Math.round(e/Math.pow(2,1-p-c)))),a=[],s=c;s;s-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(s=f;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(a.push(t?1:0),a.reverse(),o=a.join(""),u=[];o.length;)u.push(parseInt(o.substring(0,8),2)),o=o.substring(8);return u}function i(e){var t,r,i,n,s,a,o,u,f=11,c=52,p=[];for(t=e.length;t;t-=1)for(i=e[t-1],r=8;r;r-=1)p.push(i%2?1:0),i>>=1;return p.reverse(),n=p.join(""),s=(1<<f-1)-1,a=parseInt(n.substring(0,1),2)?-1:1,o=parseInt(n.substring(1,1+f),2),u=parseInt(n.substring(1+f),2),o===(1<<f)-1?0!==u?0/0:1/0*a:o>0?a*Math.pow(2,o-s)*(1+u/Math.pow(2,c)):0!==u?a*Math.pow(2,-(s-1))*(u/Math.pow(2,c)):0>a?-0:0}t.exports={pack:r,unpack:i}},{}],16:[function(e,t){t.exports=function(e,t,r){if(void 0===e||null===e)throw new TypeError('"array" is null or not defined');var i=e.length>>>0;for(r=+r||0,1/0===Math.abs(r)&&(r=0),0>r&&(r+=i,0>r&&(r=0));i>r;r++)if(e[r]===t)return r;return-1}},{}],17:[function(e,t){var r=e("./../amf/amf.js"),i=function(e){return e?"exportData"in e&&"importData"in e:!1},n=function(e,t){return"object"==typeof e&&r.CLASS_MAPPING_FIELD in e&&t&r.CLASS_MAPPING?e._classMapping:""},s=function(e){if(!e)return[];var t=[];for(var i in e)i!=r.CLASS_MAPPING_FIELD&&"function"!=typeof e[i]&&t.push(i);return t};t.exports={isSerializable:i,getClassName:n,getObjectKeys:s}},{"./../amf/amf.js":2}],18:[function(e,t){var r=e("./indexof.js"),i=function(){this.store={},this.store[i.TYPE_STRING]=[],this.store[i.TYPE_OBJECT]=[]},n=function(e,t){var i=r(this.store[t],e);return i>=0?i:this.validate(e)?(this.addReference(e,t),!1):!1},s=function(e,t){if(!this.store.hasOwnProperty(t))return!1;var r=this.store[t].length;return e>=r?!1:r?this.store[t][e]:!1},a=function(e){return null===e||"string"==typeof e&&!e.length?!1:!0},o=function(e,t){return this.validate(e)?(this.store[t].push(e),e):!1};i.prototype={getReference:n,addReference:o,getByReference:s,validate:a},i.TYPE_STRING="string",i.TYPE_OBJECT="object",t.exports=i},{"./indexof.js":16}],19:[function(e,t,r){(function(e){!function(i){function n(e){for(var t,r,i=[],n=0,s=e.length;s>n;)t=e.charCodeAt(n++),t>=55296&&56319>=t&&s>n?(r=e.charCodeAt(n++),56320==(64512&r)?i.push(((1023&t)<<10)+(1023&r)+65536):(i.push(t),n--)):i.push(t);return i}function s(e){for(var t,r=e.length,i=-1,n="";++i<r;)t=e[i],t>65535&&(t-=65536,n+=v(t>>>10&1023|55296),t=56320|1023&t),n+=v(t);return n}function a(e,t){return v(e>>t&63|128)}function o(e){if(0==(4294967168&e))return v(e);var t="";return 0==(4294965248&e)?t=v(e>>6&31|192):0==(4294901760&e)?(t=v(e>>12&15|224),t+=a(e,6)):0==(4292870144&e)&&(t=v(e>>18&7|240),t+=a(e,12),t+=a(e,6)),t+=v(63&e|128)}function u(e){for(var t,r=n(e),i=r.length,s=-1,a="";++s<i;)t=r[s],a+=o(t);return a}function f(){if(_>=E)throw Error("Invalid byte index");var e=255&d[_];if(_++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function c(){var e,t,r,i,n;if(_>E)throw Error("Invalid byte index");if(_==E)return!1;if(e=255&d[_],_++,0==(128&e))return e;if(192==(224&e)){var t=f();if(n=(31&e)<<6|t,n>=128)return n;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=f(),r=f(),n=(15&e)<<12|t<<6|r,n>=2048)return n;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=f(),r=f(),i=f(),n=(15&e)<<18|t<<12|r<<6|i,n>=65536&&1114111>=n))return n;throw Error("Invalid UTF-8 detected")}function p(e){d=n(e),E=d.length,_=0;for(var t,r=[];(t=c())!==!1;)r.push(t);return s(r)}var l="object"==typeof r&&r,h="object"==typeof t&&t&&t.exports==l&&t,y="object"==typeof e&&e;(y.global===y||y.window===y)&&(i=y);var d,E,_,v=String.fromCharCode,A={version:"2.0.0",encode:u,decode:p};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return A});else if(l&&!l.nodeType)if(h)h.exports=A;else{var T={},I=T.hasOwnProperty;for(var w in A)I.call(A,w)&&(l[w]=A[w])}else i.utf8=A}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);